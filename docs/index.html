<!DOCTYPE html>
<html lang='en'>
	<head>
		<title>flickr cc attribution bookmarklet maker</title>

		<meta http-equiv='Content-Type' content='text/html; charset=utf-8' />
		<link rel='stylesheet' type='text/css' href='assets/css/style.css' />
		<link rel='stylesheet' type='text/css' href='assets/css/bootstrap.css' />
		<link rel='stylesheet' type='text/css' href='assets/css/prettify.css' />
		
		<style type='text/css'>
		label, input, textarea {display:block;}
		label {margin:1em, 0, 0; font-weight:900; }
		input, textarea {width: 500px;}
   		</style>

		<!--[if lt IE 9]><script type='text/javascript' src='assets/javascript/html5.js'></script><![endif]-->
		<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
		<script type='text/javascript' src='assets/javascript/prettify.js'></script>
		
		<script type="text/javascript">


		function getAbsolutePath() {
			// get URL path for the current document (e.g. the location of index.html on host
			// ----- h/t http://stackoverflow.com/a/2864169/2418186
			var loc = window.location;
			var pathName = loc.pathname.substring(0, loc.pathname.lastIndexOf('/'));
			return loc.href.substring(0, loc.href.length - ((loc.pathname + loc.search + loc.hash).length - pathName.length));
		}
    
    	// SETUP
        // default size for image used in HTML '_m'=240px, ''=500px, '_z' = 640px, '_c'=800px, '_b' = 1024px
		var ps = '';
		
		// base URL for all relative ones used in script		
		var baseurl = getAbsolutePath();
		
		// default URL for hosted tool on github
		var fu = baseurl + '/cc-attributor.html';

		$(document).ready(function(){	
			// set default value of form fields
			$('#furl').val(fu);	
			$('#isize').val(ps);
			
			// call function to set value of text area and bookmarklet link
			makebookmarklet();				
			
			$('#furl').change(function() {
				 makebookmarklet()
			});
			
			$('#isize').change(function() {
				 makebookmarklet()
			});


			$('#helperflavor').change(function() {
				 $('#furl').val( baseurl + '/' + $('#helperflavor').val() );
				 makebookmarklet()		 
			});
			
			// this function will update the bookmarklet based on the value of the image size and url field values
			function makebookmarklet() {			
				if ( $('#isize').val() != '') {
					sizestr = "+'&s=" + $('#isize').val() + "'";
				} else {
					sizestr = '';
				}
				
				// Here is the magic code
				str = "javascript:(function(){fu=document.URL.split(\"/\")[5];helperURL='" + $('#furl').val() + "';fw=window.open(helperURL+'?flickd='+fu" + sizestr +", 'cc-helper', 'resizable=0,scrollbars=0,width=560,height=360'); setTimeout(function(){fw.focus();},1000);})()";
				
				// insert into textarea
				$('#marklet').val(str);
				
				// make it thelink for drag action form hyperlink
				$("a#mlink").attr('href', str);
			}

		});
    </script>

	</head>
	<body onload='prettyPrint()'>
	
	<div class="navbar navbar-fixed-top">
		<div class="navbar-inner">
		  <div class="container">
			<a class="brand" href="#">flickr cc attribution bookmark maker</a>
			<div class="nav-collapse">
			  <ul class="nav">
				<li class="active"><a href="#">Make It</a></li>
				<li><a href="https://github.com/cogdog/flickr-cc-helper/blob/master/README.md">Docs</a></li>
				<li><a href="flavors.html">Flavors</a></li>
				<li><a href="thanks.html">Thanks</a></li>
				<li><a href="https://github.com/cogdog/flickr-cc-helper">Code</a></li>
				<li><a href="https://cog.dog/">by cogdog</a></li>
			  </ul>
			</div><!-- /.nav-collapse -->
		  </div>
		</div><!-- /navbar-inner -->
	</div>
		
  <div class='row-fluid'>
  		<div class='hero-unit' id="home">
			<header>
				<h1 class=''>flickr cc attribution helper</h1>
				<p>Makes attributing flickr creative commons photos a simple cut and paste operation (<a href="https://github.com/cogdog/flickr-cc-helper">more...</a>)</li>
			</header>

			
			<h2 id="maker">Bookmarklet Generator</h2>
			<p>Build your own attribution tool here; just drag blue button to your browser bar.</p>
			
		<form>
	  	<label for="isize"></label>
	  	
	  	<span class="label label-important">Width of flickr image to use (not used for WordPress Block Editor)</span><br />
	  	<select id="isize">
	  		<option value="_m">240px</option>
	  		<option value="">500px</option>
	  		<option value="_z">640px</option>
	  		<option value="_c">800px</option>
	  		<option value="_b">1024px</option>
	  	</select>
	  	
	  	<label for="helperflavor"></label>
	  	<span class="label label-important">Variations for the kinds of attribution generated </span><br />
	  	<a href="flavors.html">See examples</a> for what each produces.<br />
	  	
	  	<select id="helperflavor">
	  		<option value="cc-attributor.html">Default Attributor (basic HTML)</option>
	  		<option value="wp-gutenberg-attributor.html">Wordpress 5+ Block Attributor (aka Gutenberg)</option>
	  		<option value="wp-attributor.html">Wordpress Attributor (Classic Editor with caption codes)</option>
	  		<option value="medium-attributor.html">Medium.com Attributor</option>
	  		<option value="stamp-attributor.html">Stamped Image Attributor</option>
	  		<option value="md-attributor.html">Markdown Attributor</option>
	  	</select>

	  	
	  	
	  	<label for="furl"></label>
	  	<span class="label label-important">location of attribution helper tool</span>
	  	<input type="text" id="furl" />
	  	
	  	<label for="marklet"></label>
	  	
	  	<span class="label label-important">bookmarklet code</span>
	  	<textarea id="marklet" rows="5"></textarea>
	  	Drag link for <a href="#" id="mlink" class='btn btn-info'>flickr cc attribution helper</a> to your browser bar or copy code above if you like to make them by hand.
	  	</form>
	
		</div>	
<footer class="span12">
<div class="alert">
flickr cc attribution helper is a barking dog production &bull; <a href="https://cog.dog/">cog.dog</a> &bull; <a href="https://cogdogblog.com">cogdogblog.com</a> &bull; support this project? <a href="https://patreon.com/cogdog" rel="nofollow"><img src="https://cogdog.github.io/images/badge-patreon.png" alt="Support me on Patreon"/></a> <a href="https://paypal.me/cogdog" rel="nofollow"><img src="https://cogdog.github.io/images/badge-paypal.png" alt="Support me on via PayPal"/></a>
</div>
</footer>
			</div>

		
		<a href='https://github.com/cogdog/flickr-cc-helper' class='github-ribbon'><img src='assets/images/github-ribbons/white.png' /></a>
	</div>	
	</body>
</html>
